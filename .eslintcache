[{"/Users/m-takase/myhome/mitsuwa-capp/src/App.tsx":"1","/Users/m-takase/myhome/mitsuwa-capp/src/components/Auth.tsx":"2","/Users/m-takase/myhome/mitsuwa-capp/src/components/Feed.tsx":"3","/Users/m-takase/myhome/mitsuwa-capp/src/features/userSlice.ts":"4","/Users/m-takase/myhome/mitsuwa-capp/src/firebase.ts":"5"},{"size":1240,"mtime":1611907146740,"results":"6","hashOfConfig":"7"},{"size":11636,"mtime":1611916144267,"results":"8","hashOfConfig":"7"},{"size":252,"mtime":1611889466318,"results":"9","hashOfConfig":"7"},{"size":1049,"mtime":1611906335813,"results":"10","hashOfConfig":"7"},{"size":813,"mtime":1611883022232,"results":"11","hashOfConfig":"7"},{"filePath":"12","messages":"13","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1krb2if",{"filePath":"14","messages":"15","errorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"16"},{"filePath":"17","messages":"18","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"19","messages":"20","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"21","messages":"22","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/m-takase/myhome/mitsuwa-capp/src/App.tsx",[],"/Users/m-takase/myhome/mitsuwa-capp/src/components/Auth.tsx",["23","24","25","26","27","28","29","30","31","32","33"],"import React, { useState } from \"react\";\nimport styles from \"./Auth.module.css\";\nimport { useDispatch } from \"react-redux\";\nimport { updateUserProfile } from \"../features/userSlice\";\nimport { auth, provider, db } from \"../firebase\";\n\nimport {\n    Avatar,\n    Button,\n    Container,\n    CssBaseline,\n    TextField,\n    Paper,\n    Grid,\n    Typography,\n    makeStyles,\n    Modal,\n    IconButton,\n    Box,\n} from \"@material-ui/core\";\n\nimport SendIcon from \"@material-ui/icons/Send\";\nimport CameraIcon from \"@material-ui/icons/Camera\";\nimport EmailIcon from \"@material-ui/icons/Email\";\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\nimport AccountCircleIcon from \"@material-ui/icons/AccountCircle\";\nimport { Email } from \"@material-ui/icons\";\nimport { idText } from \"typescript\";\n\nconst useStyles = makeStyles((theme) => ({\n    paper: {\n        marginTop: theme.spacing(8),\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n    },\n    avatar: {\n        margin: theme.spacing(1),\n        backgroundColor: theme.palette.secondary.main,\n    },\n    form: {\n        width: \"100%\", // Fix IE 11 issue.\n        marginTop: theme.spacing(1),\n    },\n    submit: {\n        margin: theme.spacing(3, 0, 2),\n    },\n}));\n\nconst Auth: React.FC = () => {\n    const classes = useStyles();\n    const dispatch = useDispatch();\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [username, setUsername] = useState(\"\");\n    const [photoUrl, setphotoUrl] = useState(\"\");\n    const [roomNo, setRoomNo] = useState(\"\");\n    const [secretKey, setSecretKey] = useState(\"\");\n    const [isLogin, setIsLogin] = useState(true);\n\n    const signInEmail = async () => {\n        const authUser = await auth.signInWithEmailAndPassword(email, password);\n        await db\n            .collection(\"customerData\")\n            .doc(authUser.user?.uid)\n            .get()\n            .then((doc) => {\n                if (doc.exists) {\n                    if (authUser.user!.uid === doc.data()!.id) {\n                        dispatch(\n                            updateUserProfile({\n                                displayName: doc.data()!.name,\n                                photoUrl: photoUrl,\n                                roomNo: doc.data()!.roomNo,\n                            }),\n                        );\n                    }\n                }\n            })\n            .catch((error) => {\n                alert(\n                    error.message +\n                        \": 認証データの値に異常があります。管理者にお問い合わせください\",\n                );\n            });\n    };\n\n    //シークレットキーの削除\n    const signUpEmail = async () => {\n        await db\n            .collection(\"secretData\")\n            .doc(roomNo)\n            .get()\n            .then(async (doc) => {\n                if (doc.exists && doc.data()!.key === secretKey) {\n                    const authUser = await auth.createUserWithEmailAndPassword(\n                        email,\n                        password,\n                    );\n                    await authUser.user?.updateProfile({\n                        displayName: username,\n                        photoURL: photoUrl,\n                    });\n                    await db\n                        .collection(\"customerData\")\n                        .doc(authUser.user?.uid)\n                        .set({\n                            id: authUser.user?.uid,\n                            roomNo: roomNo,\n                            name: authUser.user?.displayName,\n                            email: authUser.user?.email,\n                        });\n                    //storeのUpdate\n                    dispatch(\n                        updateUserProfile({\n                            displayName: username,\n                            photoUrl: photoUrl,\n                            roomNo: roomNo,\n                        }),\n                    );\n                } else {\n                    alert(\n                        \"認証データが一致しません。正しい値を入力してください。\",\n                    );\n                }\n            })\n            .catch((error) => {\n                alert(\n                    error.message +\n                        \": 認証データの値に異常があります。管理者にお問い合わせください\",\n                );\n            });\n    };\n\n    // カスタムプロフィール\n    // 新規と既存をどうするか\n    // const signInGoogle = async () => {\n    //     await auth.signInWithPopup(provider).catch((err) => alert(err.message));\n    // };\n\n    return (\n        <Container component=\"main\" maxWidth=\"xs\">\n            <CssBaseline />\n            <div className={classes.paper}>\n                <Avatar className={classes.avatar}>\n                    <LockOutlinedIcon />\n                </Avatar>\n                <Typography component=\"h1\" variant=\"h5\">\n                    {isLogin ? \"ログイン\" : \"ユーザー登録\"}\n                </Typography>\n                <form className={classes.form} noValidate>\n                    {!isLogin && (\n                        <>\n                            <TextField\n                                variant=\"outlined\"\n                                margin=\"normal\"\n                                required\n                                fullWidth\n                                id=\"username\"\n                                label=\"氏名\"\n                                name=\"username\"\n                                autoComplete=\"username\"\n                                autoFocus\n                                value={username}\n                                onChange={(\n                                    e: React.ChangeEvent<HTMLInputElement>,\n                                ) => {\n                                    setUsername(e.target.value);\n                                }}\n                            />\n                            <TextField\n                                variant=\"outlined\"\n                                margin=\"normal\"\n                                required\n                                fullWidth\n                                id=\"roomNo\"\n                                label=\"部屋番号\"\n                                name=\"roomNo\"\n                                autoComplete=\"roomNo\"\n                                autoFocus\n                                value={roomNo}\n                                onChange={(\n                                    e: React.ChangeEvent<HTMLInputElement>,\n                                ) => {\n                                    setRoomNo(e.target.value);\n                                }}\n                            />\n                            <TextField\n                                variant=\"outlined\"\n                                margin=\"normal\"\n                                required\n                                fullWidth\n                                name=\"secretKey\"\n                                label=\"secretKey\"\n                                type=\"password\"\n                                id=\"secretKey\"\n                                autoComplete=\"secretKey\"\n                                value={secretKey}\n                                onChange={(\n                                    e: React.ChangeEvent<HTMLInputElement>,\n                                ) => setSecretKey(e.target.value)}\n                            />\n                        </>\n                    )}\n                    <TextField\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        required\n                        fullWidth\n                        id=\"email\"\n                        label=\"Email Address\"\n                        name=\"email\"\n                        autoComplete=\"email\"\n                        autoFocus\n                        value={email}\n                        onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\n                            setEmail(e.target.value)\n                        }\n                    />\n                    <TextField\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        required\n                        fullWidth\n                        name=\"password\"\n                        label=\"Password\"\n                        type=\"password\"\n                        id=\"password\"\n                        autoComplete=\"current-password\"\n                        value={password}\n                        onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\n                            setPassword(e.target.value)\n                        }\n                    />\n                    <Button\n                        disabled={\n                            isLogin\n                                ? !email || password.length < 6\n                                : !username ||\n                                  !email ||\n                                  password.length < 6 ||\n                                  !roomNo ||\n                                  !secretKey\n                        }\n                        fullWidth\n                        variant=\"contained\"\n                        color=\"primary\"\n                        className={classes.submit}\n                        startIcon={<EmailIcon />}\n                        onClick={\n                            isLogin\n                                ? async () => {\n                                      try {\n                                          await signInEmail();\n                                      } catch (err) {\n                                          alert(err.message);\n                                      }\n                                  }\n                                : async () => {\n                                      try {\n                                          await signUpEmail();\n                                      } catch (err) {\n                                          alert(err.message);\n                                      }\n                                  }\n                        }\n                    >\n                        {isLogin ? \"ログイン\" : \"ユーザー登録\"}\n                    </Button>\n                    <Grid container>\n                        <Grid item xs>\n                            <span className={styles.login_reset}>\n                                パスワード再設定\n                            </span>\n                        </Grid>\n                        <Grid item>\n                            <span\n                                className={styles.login_toggleMode}\n                                onClick={() => setIsLogin(!isLogin)}\n                            >\n                                {isLogin\n                                    ? \"新規ユーザー登録画面へ\"\n                                    : \"ログイン画面へ\"}\n                            </span>\n                        </Grid>\n                    </Grid>\n                    {/* <Button\n                        fullWidth\n                        variant=\"contained\"\n                        color=\"primary\"\n                        className={classes.submit}\n                        onClick={signInGoogle}\n                    >\n                        Googleアカウントでログイン\n                    </Button> */}\n                </form>\n            </div>\n        </Container>\n    );\n};\n\nexport default Auth;\n","/Users/m-takase/myhome/mitsuwa-capp/src/components/Feed.tsx",[],"/Users/m-takase/myhome/mitsuwa-capp/src/features/userSlice.ts",[],"/Users/m-takase/myhome/mitsuwa-capp/src/firebase.ts",[],{"ruleId":"34","severity":1,"message":"35","line":5,"column":16,"nodeType":"36","messageId":"37","endLine":5,"endColumn":24},{"ruleId":"34","severity":1,"message":"38","line":13,"column":5,"nodeType":"36","messageId":"37","endLine":13,"endColumn":10},{"ruleId":"34","severity":1,"message":"39","line":17,"column":5,"nodeType":"36","messageId":"37","endLine":17,"endColumn":10},{"ruleId":"34","severity":1,"message":"40","line":18,"column":5,"nodeType":"36","messageId":"37","endLine":18,"endColumn":15},{"ruleId":"34","severity":1,"message":"41","line":19,"column":5,"nodeType":"36","messageId":"37","endLine":19,"endColumn":8},{"ruleId":"34","severity":1,"message":"42","line":22,"column":8,"nodeType":"36","messageId":"37","endLine":22,"endColumn":16},{"ruleId":"34","severity":1,"message":"43","line":23,"column":8,"nodeType":"36","messageId":"37","endLine":23,"endColumn":18},{"ruleId":"34","severity":1,"message":"44","line":26,"column":8,"nodeType":"36","messageId":"37","endLine":26,"endColumn":25},{"ruleId":"34","severity":1,"message":"45","line":27,"column":10,"nodeType":"36","messageId":"37","endLine":27,"endColumn":15},{"ruleId":"34","severity":1,"message":"46","line":28,"column":10,"nodeType":"36","messageId":"37","endLine":28,"endColumn":16},{"ruleId":"34","severity":1,"message":"47","line":56,"column":22,"nodeType":"36","messageId":"37","endLine":56,"endColumn":33},"@typescript-eslint/no-unused-vars","'provider' is defined but never used.","Identifier","unusedVar","'Paper' is defined but never used.","'Modal' is defined but never used.","'IconButton' is defined but never used.","'Box' is defined but never used.","'SendIcon' is defined but never used.","'CameraIcon' is defined but never used.","'AccountCircleIcon' is defined but never used.","'Email' is defined but never used.","'idText' is defined but never used.","'setphotoUrl' is assigned a value but never used."]